Замените содержимое файла представления Razor *Views/HelloWorld/Index.cshtml* следующим:

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/HelloWorld/Index.cshtml)]

Перейдите к `http://localhost:xxxx/HelloWorld`. Метод `Index` в `HelloWorldController` сделал совсем мало. Он выполнил оператор `return View();`, который указал, что метод должен использовать файл шаблона представления для отображения ответа в браузере. Поскольку имя файла шаблона представления не указывается явно, модель MVC по умолчанию использует файл представления *Index.cshtml* в папке */Views/HelloWorld*. На рисунке ниже показана строка "Hello from our View Template!", которая жестко задана в представлении.

![Окно браузера](~/tutorials/first-mvc-app/adding-view/_static/hell_template.png)

Если окно браузера слишком мало (например, на экране мобильного устройства), может стать необходимым нажать [кнопку навигации "Bootstrap" (Начальная загрузка)](http://getbootstrap.com/components/#navbar) в верхнем правом углу или коснуться ее, чтобы появились ссылки **Home** (Главная), **About** (Сведения) и **Contact** (Контакты).

![Окно браузера с выделенной кнопкой навигации "Bootstrap" (Начальная загрузка)](~/tutorials/first-mvc-app/adding-view/_static/1.png)

## <a name="changing-views-and-layout-pages"></a>Изменение представлений и страниц макета

Коснитесь ссылок в меню (**MvcMovie**, **Home** (Главная), **About** (Сведения)). Меню на каждой странице имеют одинаковый макет. Макет меню реализован в файле *Views/Shared/_Layout.cshtml*. Откройте файл *Views/Shared/_Layout.cshtml*.

С помощью шаблонов [макета](xref:mvc/views/layout) можно в одном месте задать макет контейнера HTML для всего сайта и затем использовать его на разных страницах сайта. Найдите строку `@RenderBody()`. `RenderBody` — это заполнитель, в котором отображаются все создаваемые страницы для определенных представлений, *упакованные* на странице макета. Например, если щелкнуть ссылку **About** (Сведения), представление **Views/Home/About.cshtml** отображается в методе `RenderBody`.

## <a name="change-the-title-and-menu-link-in-the-layout-file"></a>Изменение заголовка и ссылки меню в файле макета

В элементе title измените `MvcMovie` на `Movie App`. Измените текст привязки в шаблоне макета с `MvcMovie` на `Movie App` и контроллер с `Home` на `Movies`, как показано ниже:

::: moniker range="<= aspnetcore-2.0"

[!code-html[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Shared/_Layout.cshtml?highlight=7,31)]

::: moniker-end

::: moniker range=">= aspnetcore-2.1"

[!code-html[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Shared/_Layout21.cshtml?highlight=7,31)]

::: moniker-end

>[!WARNING]
> На данный момент контроллер `Movies` еще не реализован, поэтому при щелчке по этой ссылке будет возвращена ошибка 404 (страница не найдена).

Сохраните изменения и коснитесь ссылки **About** (Сведения). Обратите внимание, что заголовок вкладки браузера изменяется на **About - Movie App** (Сведения - Movie App) вместо **Mvc Movie**: 

![О вкладке](~/tutorials/first-mvc-app/adding-view/_static/about2.png)

Коснитесь ссылки **Contact** (Контакты) и убедитесь, что в заголовке и тексте привязки также отображается **Movie App**. Таким образом, внеся одно изменение в шаблон макета, мы изменили заголовок и текст ссылки на всех страницах сайта.

Просмотрите файл *Views/_ViewStart.cshtml*:


```HTML
@{
    Layout = "_Layout";
}
```

Файл *Views/_ViewStart.cshtml* предоставляет файл *Views/Shared/_Layout.cshtml* для каждого представления. Свойство `Layout` может задавать другое представление макета или иметь значение `null`, при котором макет не используется.

Изменение заголовка представления `Index`.

Откройте файл *Views/HelloWorld/Index.cshtml*. Внесите изменения в двух местах:

   * Текст, отображаемый в заголовке браузера.
   * Дополнительный заголовок (элемент `<h2>`).

Сделайте их немного разными, чтобы видеть, какой именно фрагмент кода изменяет соответствующую часть приложения.


```HTML
@{
    ViewData["Title"] = "Movie List";
}

<h2>My Movie List</h2>

<p>Hello from our View Template!</p>
```

`ViewData["Title"] = "Movie List";` в приведенном выше коде присваивает свойству `Title` словаря `ViewData` значение "Movie List". Свойство `Title` используется в элементе HTML `<title>` на странице макета:


```HTML
<title>@ViewData["Title"] - Movie App</title>
   ```

Сохраните изменения и перейдите к `http://localhost:xxxx/HelloWorld`. Обратите внимание, что основной и дополнительный заголовки браузера изменились. (Если изменения не отображаются, возможно, вы просматриваете кэшированное содержимое. В этом случае нажмите в браузере клавиши CTRL+F5 для принудительной загрузки ответа сервера.) Заголовок браузера создается с помощью атрибута `ViewData["Title"]`, который задается в шаблоне представления *Index.cshtml* и дополнительной строки "- Movie App", добавляемой в файл макета.

Также обратите внимание, что содержимое шаблона представления *Index.cshtml* объединяется с шаблоном представления *Views/Shared/_Layout.cshtml*, а в браузер отправляется один ответ HTML. С помощью шаблонов макета можно легко вносить изменения, которые применяются ко всем страницам приложения. Дополнительные сведения см. в разделе [Макет](xref:mvc/views/layout).

![Представление списка фильмов](~/tutorials/first-mvc-app/adding-view/_static/hell3.png)

В этом примере небольшой фрагмент данных (сообщение "Hello from our View Template!" ) жестко задан в коде. Приложение MVC предоставляет представление, вы реализуете контроллер, однако модели на данный момент еще нет.

## <a name="passing-data-from-the-controller-to-the-view"></a>Передача данных из контроллера в представление

Действия контроллера вызываются в ответ на входящий запрос URL-адреса. Код, обрабатывающий входящий запрос браузера, добавляется в класс контроллера. Контроллер извлекает данные из источника данных и определяет тип ответа, который будет отправлен в браузер. Контроллер может использовать шаблоны представлений для создания и форматирования ответа HTML, отправляемого браузеру.

Контроллер отвечает за предоставление данных, необходимых шаблону представления для отображения ответа. Рекомендация. Шаблоны представлений **не должны** выполнять бизнес-логику или напрямую взаимодействовать с базой данных. Вместо этого они должны работать только с данными, которые им предоставляет контроллер. Подобное разделение сфер ответственности позволяет обеспечить максимальную оптимизацию кода, а также удобство его тестирования и поддержки.

В настоящее время метод `Welcome` в классе `HelloWorldController` принимает параметры `name` и `ID`, после чего выводит значения непосредственно в браузер. Вместо отображения ответа в виде строки настройте контроллер для использования шаблона представления. Шаблон представления создает динамический ответ, для получения которого необходимо передать соответствующие фрагменты данных из контроллера в представление. Для этого контроллер может поместить динамические данные (параметры), которые требуются шаблону представления, в словарь `ViewData`, к которому впоследствии будет обращаться этот шаблон.

Вернитесь к файлу *HelloWorldController.cs* и измените метод `Welcome` так, чтобы добавлять значения `Message` и `NumTimes` в словарь `ViewData`. Словарь `ViewData` является динамическим объектом, то есть в него можно помещать абсолютно любые данные. Объект `ViewData` не имеет определенных свойств, пока в него не будут добавлены какие-либо данные. [Система привязки модели MVC](xref:mvc/models/model-binding) автоматически сопоставляет именованные параметры (`name` и `numTimes`) из строк запроса в адресной строке с параметрами метода. Полный файл *HelloWorldController.cs* выглядит следующим образом:

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_5)]

Объект словаря `ViewData` содержит данные, которые будут передаваться в представление. 

Создайте шаблон представления экрана приветствия с именем *Views/HelloWorld/Welcome.cshtml*.

В шаблоне представления *Welcome.cshtml* создайте цикл, который будет отображать строку "Hello" `NumTimes`. Замените содержимое файла *Views/HelloWorld/Welcome.cshtml* следующим:

[!code-html[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/HelloWorld/Welcome.cshtml)]

Сохраните изменения и перейдите по следующему URL-адресу:

`http://localhost:xxxx/HelloWorld/Welcome?name=Rick&numtimes=4`

Данные извлекаются по URL-адресу и передаются в контроллер с помощью [средства привязки модели MVC](xref:mvc/models/model-binding). Контроллер упаковывает данные в словарь `ViewData` и передает этот объект в представление. Представление отображает данные в формате HTML в браузере.

![Представление сведений, в котором отображается приветственный заголовок и четыре раза выводится фраза "Hello Rick"](~/tutorials/first-mvc-app/adding-view/_static/rick2.png)

В примере выше мы использовали словарь `ViewData` для передачи данных из контроллера в представление. Далее в этом руководстве для передачи данных из контроллера в представление мы будем использовать модель представления. Подход к передаче данных на основе модели представления является предпочтительным относительно применения словаря `ViewData`. Дополнительные сведения см. в разделе [Сравнение ViewModel, ViewData, ViewBag, TempData и Session в модели MVC](http://www.mytecbits.com/microsoft/dot-net/viewmodel-viewdata-viewbag-tempdata-mvc).

Этот подход характерен для модели, а не для базы данных. Итак, обобщим все полученные данные и попробуем создать базу данных фильмов.
