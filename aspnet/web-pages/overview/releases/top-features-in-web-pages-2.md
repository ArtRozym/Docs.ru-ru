---
uid: web-pages/overview/releases/top-features-in-web-pages-2
title: Основные функции ASP.NET Web Pages 2 | Документация Майкрософт
author: microsoft
description: В этом разделе содержится обзор основных новых возможностей ASP.NET Web Pages 2, упрощенных веб-программирования платформа, которая входит в состав WebMatr...
ms.author: riande
ms.date: 02/13/2012
ms.assetid: cc712e72-c3d0-4e43-bc2d-28cc09cd8f71
msc.legacyurl: /web-pages/overview/releases/top-features-in-web-pages-2
msc.type: authoredcontent
ms.openlocfilehash: e06db7eb33dc2891d86b65fa56c20b9e8cae1970
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/16/2018
ms.locfileid: "41838154"
---
<a name="the-top-features-in-aspnet-web-pages-2"></a>Лучшие компоненты веб-страниц ASP.NET 2
====================
по [Microsoft](https://github.com/microsoft)

> В этой статье представлен обзор основных новых возможностей продукта в RC 2 веб-страниц ASP.NET, упрощенных веб-программирования платформа, которая входит в состав [Microsoft WebMatrix 2 RC](https://www.microsoft.com/web/).
> 
> **Что включает в себя:** 
> 
> - [Установка WebMatrix](#install)
> - [Новые и усовершенствованные функции](#New_and_Enhanced_Features)
> 
>     - [Изменения в выпуске RC](#Changes_for_the_RC_Version)
>     - [Изменения для бета-версии](#Changes_for_the_Beta_Version)
>     - [С помощью шаблонов новых и обновленных узлов](#templates)
>     - [Проверка вводимых пользователем данных](#validation)
>     - [Включение имена входа из Facebook, а также других узлов, с помощью OAuth и OpenID](#oauthsetup)
>     - [Добавление карты, используя вспомогательный метод карт](#maphelper)
>     - [Запуск приложений на веб-страницах рядом](#sidebyside)
>     - [Подготовка к просмотру страниц для мобильных устройств](#mobile)
> - [Дополнительные ресурсы](#resources)
> 
> > [!NOTE]
> > В этом разделе предполагается, что вы используете WebMatrix для работы с кодом ASP.NET Web Pages 2. Тем не менее как с помощью Web Pages 1 также можно создать веб-сайты Web Pages 2, с помощью Visual Studio, которое позволяет улучшенные возможности IntelliSense и отладку. Для работы с веб-страниц в Visual Studio, сначала необходимо установить пакет обновления 1 для Visual Studio 2010, Visual Web Developer Express 2010 с пакетом обновления 1 или бета-версии для Visual Studio 11. Затем нужно установите ASP.NET MVC 4 бета-версию, которая включает в себя шаблоны и средства для создания приложений ASP.NET MVC 4 и Web Pages 2 в Visual Studio.
> 
> 
> *Последнее обновление: 18 июня 2012 г.*


<a id="install"></a>
## <a name="installing-webmatrix"></a>Установка WebMatrix

Для установки веб-страниц, можно использовать Microsoft Web Platform Installer, который представляет собой бесплатное приложение, который позволяет легко установить и настроить связанные с веб-технологий. Необходимо установить WebMatrix 2 бета-версии, включая бета-версия 2 веб-страниц.

1. Откройте страницу установки последнюю версию установщика веб-платформы:

    [https://go.microsoft.com/fwlink/?LinkId=226883](https://go.microsoft.com/fwlink/?LinkId=226883)

    > [!NOTE]
    > При наличии установленного 1 WebMatrix этой установки обновляет его до бета-версии 2 WebMatrix. Можно запустить веб-сайтов, созданных с помощью версии 1 или 2 на одном компьютере. Дополнительные сведения см. в разделе на [приложений веб-страниц, выполняющих рядом](#sidebyside).
2. Выберите **установить сейчас**. 

    Если вы используете Internet Explorer, перейдите к следующему шагу. Если вы используете другой браузер Mozilla Firefox или Google Chrome, будет предложено сохранить *Webmatrix.exe* файл на компьютер. Сохраните файл и затем щелкните его, чтобы запустить установщик.
3. Запустите программу установки и выберите **установить** кнопки. При этом устанавливаются WebMatrix и веб-страниц.

## <a id="New_and_Enhanced_Features"></a>  Новые и усовершенствованные функции

### <a id="Changes_for_the_RC_Version"></a>  Изменения для версии-Кандидата (июнь 2012 г.)

В выпуске версии-КАНДИДАТА версии в июне 2012 имеет некоторые изменения из обновления версии бета-версии, выпущенной в марте 2012 г. Ниже приведены эти изменения.

- Объект `Validation.AddFormError` был добавлен метод `Validation` вспомогательный. Это полезно в том случае, если проверка выполняется вручную (например, можно проверять значение, которое передается в строке запроса) и вы хотите добавить сообщение об ошибке, которое может отображаться по `Html.ValidationSummary` метод. Дополнительные сведения см. в разделе [проверка данных, не поступают непосредственно из пользователей](https://go.microsoft.com/fwlink/?LinkId=253002#Validating_Data_That_Doesnt_Come_Directly_from_Users) в [проверка пользовательского ввода на сайтах ASP.NET Web Pages (Razor)](https://go.microsoft.com/fwlink/?LinkId=253002).
- Функциональные возможности для объединения и минификации был удален из ASP.NET Web Pages 2 основных сборок. Как следствие `Assets` недоступности вспомогательного перечисленные далее в этом документе. Вместо этого необходимо установить [оптимизации ASP.NET](http://nuget.org/packages/Microsoft.Web.Optimization/0.1) пакет NuGet. Дополнительные сведения см. в разделе [объединение и Минификация активов на сайте веб-страниц ASP.NET (Razor)](https://go.microsoft.com/fwlink/?LinkId=255373).
- Были добавлены дополнительные сборки для поддержки ASP.NET Web Pages 2. Только заметно это изменение действует так, может появиться несколько сборок, на сайте *bin* папки после создания сайта или развертывание сайта поставщика услуг размещения.

<a id="Changes_for_the_Beta_Version"></a>
### <a name="changes-for-the-beta-version-february-2012"></a>Изменения для бета-версии (февраль 2012 г.)

Бета-версии, выпущенной в феврале 2012 имеет незначительные изменения бета-версии, выпущенной в декабре 2011. Ниже приведены эти изменения.

- Razor поддерживает условные атрибуты. В HTML-элементе, если для атрибута задано значение, разрешается в коде сервера, чтобы `false` или `null`, ASP.NET не обрабатывает атрибут вообще. Например представьте, что у вас есть следующая разметка для типа "флажок":

    [!code-html[Main](top-features-in-web-pages-2/samples/sample1.html)]

    Если значение `checked1` разрешается `false` или `null`, `checked` атрибут не отображается. Это критическое изменение.
- `Validation.GetHtml` Метод был переименован в `Validation.For`. Это критическое изменение; `Validation.GetHtml` не будет работать в бета-версии.
- Теперь можно включать `~` оператор в разметке для ссылки на корневой каталог сайта без использования `Href` функции. (То есть средство синтаксического анализа Razor может теперь найдите и устраните `~` оператор, не требуя при вызове метода явный метод `Href`.) `Href` Метод по-прежнему работает, так что это не является критическим изменением.

    Например, если ранее вы разметки следующим образом:

    `<a href="@Href("~/Default.cshtml")">Home</a>`

    Теперь можно использовать разметку следующим образом:

    `<a href="~/Default.cshtml">Home</a>`
- `Scripts` Вспомогательный класс для управления активы (ресурс) был заменен `Assets` вспомогательного приложения, который имеет немного разные методы, такие как следующие:

  - Для `Scripts.Add`, используйте `Assets.AddScript`
  - Для `Scripts.GetScriptTags`, используйте `Assets.GetScripts`

    Это критическое изменение; `Scripts` класс не доступен в бета-версии. В примерах кода в этом документе с помощью средств управления были обновлены с этим изменением.

<a id="templates"></a>
### <a name="using-the-new-and-updated-site-templates"></a>С помощью шаблонов новых и обновленных узлов

**Начального сайта** шаблон был обновлен так, что она работает на 2 веб-страницы по умолчанию. Он также включает следующие новые возможности:

- Отрисовка страницы адаптированный для мобильных устройств. При помощи стилей CSS и `@media` селектора **начального сайта** предоставляет улучшенную отрисовку страниц на экране меньшего размера, включая экранов мобильных устройств.
- Улучшенные параметры членства и проверки подлинности. Вы можете разрешить пользователям входить на сайт, используя учетные записи из других сетевых сообществ, такие как Twitter, Facebook и Windows Live. Дополнительные сведения см. в разделе [Включение имена входа из Facebook и другие узлы, с помощью OAuth и OpenID](#oauthsetup) раздел.
- Такие элементы HTML5.

Новый **личный сайт** шаблон позволяет создавать веб-сайт, содержащий ведете блог, фотографии страницу и страницу Twitter. Можно настроить сайт на основе **личный сайт** шаблона следующим образом:

- Изменение внешнего вида узла, изменив файл макета (*\_SiteLayout.cshtml*) и стилями файл (*Site.css*).
- Установите пакеты NuGet, которые добавляют функции веб-узла. Сведения об установке пакетов, включая библиотеку ASP.NET, см. в руководстве [Установка вспомогательных функций](https://go.microsoft.com/fwlink/?LinkId=202889#webhelpers).

Для доступа к **личный сайт** шаблон, выберите **шаблоны** на WebMatrix **быстрый запуск** экрана.

[![topseven-personalsite-1](top-features-in-web-pages-2/_static/image2.png)](top-features-in-web-pages-2/_static/image1.png)

В **шаблоны** диалоговое окно, выберите **личный сайт** шаблона.

[![topseven-personalsite-2](top-features-in-web-pages-2/_static/image4.png)](top-features-in-web-pages-2/_static/image3.png)

Целевая страница **личный сайт** шаблон позволяет переходить по ссылкам в блоге, Twitter, страницы и фотографии.

[![topseven-personalsite-3](top-features-in-web-pages-2/_static/image6.png)](top-features-in-web-pages-2/_static/image5.png)

<a id="validation"></a>
### <a name="validating-user-input"></a>Проверка вводимых пользователем данных

В Web Pages 1, для проверки пользовательского ввода на отправленных форм, используется `System.Web.WebPages.Html.ModelState` класса. (Это показано в следующих примерах кода в этом руководстве Web Pages 1 под названием [работа с данными](../data/5-working-with-data.md).) Такой подход по-прежнему можно использовать в Web Pages 2. Тем не менее Web Pages 2 также предлагает улучшенные средства проверки ввода пользователя.

- Новые классы проверки, включая `System.Web.WebPages.ValidationHelper` и `System.Web.WebPages.Validator`, которые позволяют выполнять задачи мощные проверки с помощью нескольких строк кода.
- При необходимости проверки на стороне клиента, обеспечивающий немедленный отзыв для пользователя не требует обращение к серверу для проверки ошибок проверки. (По соображениям безопасности, проверка выполняется на сервере даже если проверки были выполнены в клиенте заранее.)

Чтобы использовать новые функции проверки, сделайте следующее:

В коде страницы регистрации элемента для проверки с помощью методов класса `Validation` вспомогательный: `Validation.RequireField`, `Validation.RequireFields` (для регистрации нескольких элементов обязательным), или `Validation.Add`. `Add` Метод позволяет указать другие виды проверки допустимости, такие как тип данных в проверку, сравнение записей в различных полей, проверки длины строки и шаблонов (с помощью регулярных выражений). Далее приводятся некоторые примеры.

[!code-html[Main](top-features-in-web-pages-2/samples/sample2.html)]

Чтобы отобразить ошибку конкретных полей, вызовите `Html.ValidationMessage` в разметке для каждого элемента проверки:

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample3.cshtml)]

Для отображения сводки (`<ul>` списка) все ошибки на странице `Html.ValidationSummary` в разметке:

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample4.cshtml)]

Эти действия являются достаточно для реализации проверки на стороне сервера. Если вы хотите добавить клиентскую проверку, выполните следующие действия в дополнение.

Добавьте следующие ссылки на файл скрипта внутри `<head>` раздел веб-страницы. Первые две ссылки сценария указывают на удаленные файлы на сервере доставки содержимого сети (CDN). Третий ссылка указывает на файл локальный сценарий. Рабочие приложения должны реализовывать переход на резервный ресурс, если CDN недоступен. Протестируйте резервный вариант.

[!code-html[Main](top-features-in-web-pages-2/samples/sample5.html)]

Самый простой способ получить локальную копию *jquery.validate.unobtrusive.min.js* библиотеки заключается в создании нового веб-страниц сайта на основе одного из шаблонов узлов (например, начальный сайт). Этот узел, шаблон включает *jquery.validate.unobtrusive.js* файл в его папке Scripts, из которого можно скопировать его на свой сайт.

Если веб-сайт использует<em>\_SiteLayout</em> странице для управления макетом страницы, ссылки на эти скрипты можно включить в эту страницу, чтобы проверка доступна для всех страниц содержимого. Если вы хотите выполнить проверку только на отдельных страницах, можно использовать диспетчер ресурсов для регистрации сценариев на лишь те страницы. Чтобы сделать это, вызовите `Assets.AddScript(path)` на странице, который требуется проверить и ссылки для каждого из файлов сценариев. Затем добавьте вызов `Assets.GetScripts` в  <em>\_SiteLayout</em> страницы для отображения зарегистрированных `<script>` теги. Дополнительные сведения см. в разделе [регистрация сценариев с помощью диспетчера ресурсов](#resmanagement).

В разметке отдельного элемента, вызовите `Validation.For` метод. Этот метод создает атрибуты jQuery можно подключить для обеспечения проверки на стороне клиента. Пример:

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample6.cshtml)]

Следующий пример показывает страницу, которая проверяет введенные пользователем данные в форме. Чтобы запустить и протестировать этот код проверки, для этого:

1. Создание нового веб-сайта, с помощью одного из шаблонов WebMatrix 2 узлов, которые включает в себя *сценарии* папки, такие как **начального сайта** шаблона.
2. На новом сайте, создайте новый *.cshtml* странице и замените содержимое страницы со следующим кодом.
3. Откройте страницу в браузере. Введите допустимые и недопустимые значения, чтобы оценить влияние на проверку. Например, не указывайте это обязательное поле или введите букву в **кредиты** поля.


[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample7.cshtml)]

Ниже приведен страницы, когда пользователь отправляет допустимых входных данных.

[![topSeven допустимым-1](top-features-in-web-pages-2/_static/image8.png)](top-features-in-web-pages-2/_static/image7.png)

Ниже приведен страницы, когда пользователь отправляет его с обязательное поле будет пустым.

[![topSeven допустимым-2](top-features-in-web-pages-2/_static/image10.png)](top-features-in-web-pages-2/_static/image9.png)

Здесь — это страница, когда пользователь отправляет его с отличные от целое число в **кредиты** поля:

[![topSeven допустимым-3](top-features-in-web-pages-2/_static/image12.png)](top-features-in-web-pages-2/_static/image11.png)

Дополнительные сведения см. в следующих записях блога:

- [Обновить проверка в Web Pages 2](http://mikepope.com/blog/DisplayBlog.aspx?permalink=2344) основами проверки с помощью `Validation` вспомогательный (на сервере только)
- [Обновить проверка в Web Pages 2, часть 2](http://www.mikepope.com/blog/DisplayBlog.aspx?permalink=2347) Добавление проверки на стороне клиента.
- [Обновить проверка в Web Pages 2, часть 3](http://mikepope.com/blog/DisplayBlog.aspx?permalink=2351) форматирование ошибки проверки.

<a id="resmanagement"></a>
### <a name="registering-scripts-using-the-assets-manager"></a>Регистрация скриптов с помощью диспетчера ресурсов

Диспетчер ресурсов — это новая функция, который можно использовать в коде сервера для регистрации и просмотру клиентских скриптов. Эта возможность полезна в тех случаях, когда вы работаете с кодом из нескольких файлов (например, страниц макетов, страницы содержимого, вспомогательные функции и др.), которые будут объединены в одну страницу во время выполнения. Диспетчер ресурсов координирует исходные файлы, чтобы убедиться в том, что файлы скриптов правильно указаны ссылки на и эффективно на подготовленной странице, независимо от того, какие файлы кода, они вызываются из или сколько раз они вызываются. Диспетчер ресурсов предоставляет также `<script>` теги в нужном месте, чтобы страницы можно загрузить быстро (без загрузки сценариев во время подготовки к просмотру), а также чтобы избежать ошибок, которые могут возникнуть, если скрипты вызываются перед отрисовкой завершена.

Например предположим, что создание пользовательских вспомогательных, который вызывает файл JavaScript и вызывать этого вспомогательного объекта в трех разных местах в коде страницы содержимого. Если вы не используете диспетчер ресурсов, чтобы зарегистрировать сценарий вызывает во вспомогательном методе, три разных `<script>` теги, которые будут отображаться все точки на тот же файл скрипта в готовом для просмотра страницы. Кроме того, в зависимости от того, где `<script>` теги вставляются в отображаемой странице, могут возникнуть ошибки, если сценарий пытается получить доступ к определенных элементов на странице, до полной загрузки страницы. Если вы используете диспетчер ресурсов для регистрации скрипта, можно избежать этих проблем.

Таким образом, можно зарегистрировать скрипт с помощью диспетчера ресурсов:

- В коде, который необходимо использовать ссылки на сценарий, вызовите `Assets.AddScript` метод.
- В  *\_SiteLayout* странице, вызовите `Assets.GetScripts` для отрисовки `<script>` теги. 

    > [!NOTE]
    > Вызовы к `Assets.GetScripts` как очень последний элемент в `<body>` элемент  *\_SiteLayout* страницы. Это помогает страницы загружаются быстрее и помогает избежать ошибок скрипта.

Следующий пример показывает, как работает диспетчер ресурсов. Код содержит следующие элементы:

- Пользовательские вспомогательный объект с именем `MakeNote`. Этот вспомогательный отображает строку внутри поля, заключив `div` элемент вокруг него, стилем с границей, а также посредством добавления &quot;Примечание:&quot; к нему. Вспомогательный метод также вызывает файл JavaScript, который добавляет поведение среды выполнения к примечанию. Вместо ссылки на скрипт с `<script>` тег, вспомогательное приложение регистрирует скрипт, вызвав `Assets.AddScript` .
- Файл JavaScript. Это файл, который называется вспомогательной функцией, а также временно увеличивает размер шрифта элементов Примечание во время `mouseover` событий.
- Страницы содержимого, который ссылается на<em>\_SiteLayout</em> странице отображает часть содержимого в тексте, а затем вызывает `MakeNote` вспомогательный.
- Объект  *\_SiteLayout* страницы. Эта страница содержит общие заголовка и структуре макета страницы. Он также включает вызов `Assets.GetScripts`, это, как диспетчер ресурсов будет выглядеть скрипт вызывает на странице.

Для выполнения образца:

1. Создайте пустой веб-сайт Web Pages 2. Вы можете использовать WebMatrix **пустой сайт** шаблона для этого.
2. Создайте папку с именем *сценариев* на сайте.
3. В *сценарии* папке создайте файл с именем *Test.js*, копирования *Test.js* содержимого в него из примера и сохраните файл...
4. Создайте папку с именем *приложения\_кода* на сайте.
5. В *приложения\_кода* папке создайте файл с именем *Helpers.cshtml*, скопируйте код примера и сохраните его в папку с именем *приложения\_кода*в корневой папке.
6. В корневой папке веб-узла, создайте файл с именем  *\_SiteLayout.cshtml,* скопируйте пример в его и сохраните файл.
7. В корневой каталог сайта, создайте файл с именем *ContentPage.cshtml*, код примера и сохраните его.
8. Запустите *ContentPage* в браузере. Строка, передаваемая в `MakeNote` вспомогательный подготавливается к просмотру как упакованный заметки.
9. Наведите указатель мыши на заметку. Скрипт временно увеличивает размер шрифта примечания.
10. Просмотрите источник отображаемой страницы. Из-за расположения вызов `Assets.GetScripts`, готовый для просмотра `<script>` тег, который вызывает *Test.js* — самый последний элемент в основной области страницы.

*Test.js*

[!code-javascript[Main](top-features-in-web-pages-2/samples/sample8.js)]

*Helpers.cshtml*

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample9.cshtml)]

*\_SiteLayout.cshtml*

[!code-html[Main](top-features-in-web-pages-2/samples/sample10.html)]

*ContentPage.cshtml*

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample11.cshtml)]

На следующем снимке экрана показан *ContentPage.cshtml* в браузере, если навести указатель мыши на заметку:

[![topSeven-resmgr-1](top-features-in-web-pages-2/_static/image14.png)](top-features-in-web-pages-2/_static/image13.png)

<a id="oauthsetup"></a>
### <a name="enabling-logins-from-facebook-and-other-sites-using-oauth-and-openid"></a>Включение имена входа из Facebook, а также других узлов, с помощью OAuth и OpenID

Web Pages 2 предоставляет расширенные параметры для членства и проверки подлинности. Основные улучшения: существуют новые [OAuth](http://oauth.net/) и [OpenID](http://openid.net/) поставщиков. С помощью этих поставщиков, вы можете разрешить пользователям входить на сайт, с помощью существующих учетных данных из Facebook, Twitter, Windows Live, Google и Yahoo. Например чтобы войти с использованием учетной записи Facebook, пользователей можно выбрать значок Facebook, который перенаправляет их на страницу входа Facebook, где они ввести учетные данные. Они затем можно связать имя входа Facebook со своей учетной записью на узле. Улучшение функций членства веб-страницы – что пользователи могут связать несколько попыток входа (в том числе имена входа из сетевых сообществ) с одной учетной записи на веб-сайте.

На этом изображении показаны на страницу входа из **начального сайта** шаблон, где пользователь может выбрать значок, Facebook, Twitter или Windows Live, чтобы включить ведение журнала с помощью учетной записи внешнего:

[![topSeven-oauth-1](top-features-in-web-pages-2/_static/image16.png)](top-features-in-web-pages-2/_static/image15.png)

Вы можете включить членства OAuth и OpenID, с помощью всего нескольких строк кода. Методы и свойства, которые позволяют работать с OAuth и OpenID поставщики находятся в `WebMatrix.Security.OAuthWebSecurity` класса.

Тем не менее, вместо кода для входа с других сайтов, рекомендуемый способ приступить к работе с новых поставщиков — использовать новый **начального сайта** шаблон, который входит в состав бета-версии 2 WebMatrix. **Начального сайта** шаблон включает инфраструктуру полнофункционального членства, дополненный страницу входа, базы данных членства и весь код, вам нужно разрешить пользователям входить на сайт, с помощью локальных учетных данных или из другого сайта .

#### <a name="how-to-enable-logins-using-the-oauth-and-openid-providers"></a>Как включить имена входа, с помощью OAuth и OpenID поставщиков

В этом разделе приведен пример того, как разрешить пользователям вход с внешних сайтов (Facebook, Twitter, Windows Live, Google или Yahoo) на узел, основанный на **начального сайта** шаблона. После создания начального сайта, это сделать (выполните сведения):

- Для узлов, которые используют поставщик OAuth (Facebook, Twitter и Windows Live) создайте приложение на внешний сайт. Это дает ключи приложений, которая потребуется для вызова функции login для этих сайтов. Для сайтов, использующих поставщик OpenID (Google, Yahoo) у вас нет для создания приложения. Для всех этих узлов необходимо настроить учетную запись для входа в систему и создавать приложения для разработчиков. 

    > [!NOTE]
    > Приложения Windows Live принимать динамический URL-адрес для работающего веб-сайта, только в том случае, поэтому ее невозможно использовать URL-адрес локального веб-сайта для тестирования имен входа.
- Измените несколько файлов в веб-сайта, чтобы указать поставщика проверки подлинности и для отправки имени входа на сайт, который вы хотите использовать.

**Чтобы включить имена входа Google и Yahoo**:

1. В веб-сайта, измените  *\_AppStart.cshtml* странице и добавьте следующие две строки кода в блоке кода Razor после вызова `WebSecurity.InitializeDatabaseConnection` метод. Этот код позволяет поставщикам Google и Yahoo OpenID. 

    [!code-css[Main](top-features-in-web-pages-2/samples/sample12.css)]
2. В *~/Account/Login.cshtml* странице, удалите комментарии из следующей `<fieldset>` блок разметки в конце страницы. Чтобы раскомментируйте код, удалите `@*` символы, которые предшествуют и следуют за `<fieldset>` блока. Итоговый блок кода выглядит следующим образом:

    [!code-html[Main](top-features-in-web-pages-2/samples/sample13.html)]
3. Добавить `<input>` элемент для поставщика Google или Yahoo `<fieldset>` в группе *~/Account/Login.cshtml* страницы. Обновленный `<fieldset>` группы с `<input>` элементы для Google и Yahoo выглядит как в следующем примере: 

    [!code-html[Main](top-features-in-web-pages-2/samples/sample14.html)]
4. В *~/Account/AssociateServiceAccount.cshtml* странице, добавьте `<input>` элементы для Google или Yahoo к `<fieldset>` группе ближе к концу файла. Вы можете скопировать же `<input>` элементы, которые только что добавленные `<fieldset>` статьи *~/Account/Login.cshtml* страницы. 

    *~/Account/AssociateServiceAccount.cshtml* страницы в шаблоне начального сайта можно использовать, если вы хотите создать страницу, на котором пользователи могут связать несколько попыток входа с другого сайта, с одной учетной записи на веб-сайте.

Теперь можно проверить имена для входа Google и Yahoo.

1. Запустите *default.cshtml* страницы веб-сайта и выберите **вход** кнопки.
2. На *входа* странице **вход с помощью другой службы** выберите либо **Google** или **Yahoo** кнопка "Отправить". В этом примере используется имя входа Google. 

    Веб-страницы перенаправляет запрос на страницу входа Google.

    [![topSeven-oauth-6](top-features-in-web-pages-2/_static/image18.png)](top-features-in-web-pages-2/_static/image17.png)
3. Введите учетные данные для существующей учетной записи Google.
4. Если Google спрашивает, хотите ли вы разрешить Localhost, чтобы использовать сведения из учетной записи, нажмите кнопку **Разрешить**.

    Код использует маркер Google для проверки подлинности пользователя и возвращает на эту страницу на веб-сайте. Эта страница позволяет связать их имени для входа Google с существующей учетной записи на веб-сайте, или они могут зарегистрировать новую учетную запись на сайте, чтобы связать внешней учетной записи с.

    [![topSeven-oauth-5](top-features-in-web-pages-2/_static/image20.png)](top-features-in-web-pages-2/_static/image19.png)
5. Выберите **связать** кнопки. Браузер возвращается на домашнюю страницу приложения.

    [![topSeven-oauth-3](top-features-in-web-pages-2/_static/image22.png)](top-features-in-web-pages-2/_static/image21.png)

    [![topSeven-oauth-3](top-features-in-web-pages-2/_static/image24.png)](top-features-in-web-pages-2/_static/image23.png)

**Для входа Facebook**:

1. Перейдите к [сайт разработчиков Facebook](https://developers.facebook.com/apps) (вход, если вы еще не вошли).
2. Выберите **создать новое приложение** кнопку, а затем следуйте инструкциям на экране, чтобы задать имя и создать новое приложение.
3. В разделе **выберите, каким образом ваше приложение будет интегрировано с Facebook**, выберите **веб-сайт** раздел.
4. Заполните **URL-адрес сайта** с URL-адрес веб-сайта (например, [ `http://www.example.com` ](http://www.example.com)). **Домена** поле является необязательным; это можно использовать для проверки подлинности для всего домена (такие как *example.com*). 

    > [!NOTE]
    > При запуске на локальном компьютере с URL-адрес сайта, такие как `http://localhost:12345` (где номер является номером локального порта), можно добавить это значение, чтобы **URL-адрес сайта** для тестирования веб-узла. Тем не менее, номер порта изменений локального сайта в любое время, вам потребуется обновить **URL-адрес сайта** поле приложения.
5. Выберите **сохранить изменения** кнопки.
6. Выберите **приложений** снова откройте вкладку, а затем просмотрите начальной страницы в приложении.
7. Копировать **идентификатор приложения** и **секрет приложения** значения для вашего приложения и вставьте их в текстовый временный файл. Эти значения к поставщику Facebook передаст в код веб-сайта.
8. Выйдите из сайта разработчика Facebook.

Теперь вы внести изменения две страницы в веб-сайта, чтобы пользователи будут возможность войти на сайт, используя учетные записи Facebook.

1. В веб-сайта, измените  *\_AppStart.cshtml* странице и раскомментируйте код для поставщика Facebook OAuth. Блок кода Раскомментировать области кода выглядит следующим образом: 

    [!code-xml[Main](top-features-in-web-pages-2/samples/sample15.xml)]
2. Копировать **идентификатор приложения** значение из приложения Facebook в качестве значения `consumerKey` параметра (внутри кавычек).
3. Копировать **секрет приложения** значение из приложения Facebook в качестве `consumerSecret` значение параметра.
4. Сохраните и закройте файл.
5. Изменить *~/Account/Login.cshtml* странице и удалить комментарии из `<fieldset>` блок в конце страницы. Чтобы раскомментируйте код, удалите `@*` символы, которые предшествуют и следуют за `<fieldset>` блока. Блок кода с комментариями удалены выглядит следующим образом: 

    [!code-html[Main](top-features-in-web-pages-2/samples/sample16.html)]
6. Сохраните и закройте файл.

Теперь можно протестировать имя входа Facebook.

1. Запустите веб-узла *default.cshtml* странице и выбрать **входа** кнопки.
2. На *входа* странице **вход с помощью другой службы** выберите **Facebook** значок. 

    Веб-страницы перенаправляет запрос на страницу входа в Facebook.

    [![topSeven-oauth-2](top-features-in-web-pages-2/_static/image26.png)](top-features-in-web-pages-2/_static/image25.png)
3. Войдите в учетную запись Facebook. 

    Код использует маркер Facebook для проверки подлинности и затем возвращается на страницу, где можно связать имя входа Facebook с именем входа веб сайта. Адрес имя или адрес электронной почты пользователя заполняется в **электронной почты** поле в форме.

    [![topSeven-oauth-5](top-features-in-web-pages-2/_static/image28.png)](top-features-in-web-pages-2/_static/image27.png)
4. Выберите **связать** кнопки. 

    Браузер возвращается на домашнюю страницу, и вы вошли.

    [![topSeven-oauth-3](top-features-in-web-pages-2/_static/image30.png)](top-features-in-web-pages-2/_static/image29.png)

**Чтобы включить имена входа Twitter:** 

1. Перейдите к [сайте разработчиков Twitter](https://dev.twitter.com/).
2. Выберите **Создание приложения** ссылку и затем войти на сайт.
3. На **создать приложение** форме, заполните **имя** и **описание** поля.
4. В **веб-сайт** введите URL-адрес веб-сайта (например, [ `http://www.example.com` ](http://www.example.com)). 

    > [!NOTE]
    > Если вы тестируете свой сайт локально (с помощью URL-адресу вида `http://localhost:12345`), URL-адрес может не поддерживать в Twitter. Тем не менее, можно использовать локальный петлевой IP-адрес (например `http://127.0.0.1:12345`). Это упрощает процесс тестирования приложения локально. Тем не менее, при каждом изменении номер порта на локальный сайт, вам потребуется обновить **веб-сайт** поле приложения.
5. В **URL-адрес обратного вызова** введите URL-адрес для страницы в веб-сайта, нужно вернуться после входа в Twitter. Например, чтобы отправить пользователей на домашнюю страницу сайта Starter (который будет распознавать их состояние вошедшего в систему), введите же URL-адрес, введенный в **веб-сайт** поля.
6. Примите условия и выберите **создать приложение Twitter** кнопки.
7. На **Мои приложения** целевой страницы, выберите созданное приложение.
8. На **сведения** вкладке, прокрутите вниз и выберите пункт **создать My Access Token** кнопки.
9. На **сведения** вкладке, скопируйте **ключ потребителя** и **секретный ключ потребителя** значения для вашего приложения и вставьте их в текстовый временный файл. Вы передадите эти значения к поставщику Twitter в коде веб-сайта.
10. Выход на сайте Twitter.

Теперь можно внести изменения две страницы в веб-сайта таким образом, пользователи смогут войти на сайт, с помощью учетной записи Twitter.

1. В веб-сайта, измените  *\_AppStart.cshtml* странице и раскомментируйте код для поставщика Twitter OAuth. Блок кода Раскомментировать области кода выглядит следующим образом: 

    [!code-csharp[Main](top-features-in-web-pages-2/samples/sample17.cs)]
2. Копировать **ключ потребителя** значение из приложения Twitter для параметра `consumerKey` параметр (внутри кавычек).
3. Копировать **секретный ключ потребителя** значение из приложения Twitter для параметра `consumerSecret` параметр.
4. Сохраните и закройте файл.
5. Изменить *~/Account/Login.cshtml* странице и удалить комментарии из `<fieldset>` блок в конце страницы. Чтобы раскомментируйте код, удалите `@*` символы, которые предшествуют и следуют за `<fieldset>` блока. Блок кода с комментариями удалены выглядит следующим образом: 

    [!code-html[Main](top-features-in-web-pages-2/samples/sample18.html)]
6. Сохраните и закройте файл.

Теперь можно протестировать входа в Twitter.

1. Запустите *default.cshtml* страницы веб-сайта и выберите **входа** кнопки.
2. На *входа* странице **вход с помощью другой службы** выберите **Twitter** значок. 

    Веб-страницы перенаправляет запрос на страницу входа Twitter для приложения, которое вы создали.

    [![topSeven-oauth-4](top-features-in-web-pages-2/_static/image32.png)](top-features-in-web-pages-2/_static/image31.png)
3. Войдите в учетную запись Twitter.
4. Код использует маркер Twitter для проверки подлинности пользователя и последующий возврат к странице где можно связать имя входа с учетной записью веб-сайта. Имя или адрес электронной почты адрес заполняется в **электронной почты** поле в форме.

    [![topSeven-oauth-5](top-features-in-web-pages-2/_static/image34.png)](top-features-in-web-pages-2/_static/image33.png)
5. Выберите **связать** кнопки. 

    Браузер возвращается на домашнюю страницу, и вы вошли.

    [![topSeven-oauth-3](top-features-in-web-pages-2/_static/image36.png)](top-features-in-web-pages-2/_static/image35.png)

<a id="maphelper"></a>
### <a name="adding-maps-using-the-maps-helper"></a>Добавление карты, используя вспомогательный метод карт

Web Pages 2 включает в себя дополнения к библиотеку ASP.NET, который — это пакет дополнений для веб-страниц сайта. Один из них — это компонент сопоставления, предоставляемые `Microsoft.Web.Helpers.Maps` класса. Можно использовать `Maps` класса для создания карт, либо на основе адреса либо набор координат широты и долготы. `Maps` Класса позволяет вызывать непосредственно в модули популярных карты, включая Bing, Google, Yahoo и MapQuest.

Чтобы использовать новую `Maps` класса в веб-сайта, сначала необходимо установить версию 2 библиотеку. Чтобы сделать это, перейдите к инструкциям по установке в настоящее время версии [библиотеку ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202889#webhelpers) и установите версии 2.

Инструкции по добавлению сопоставления на страницу одинаковы независимо от того, какое ядро карты вы вызываете. Просто добавьте ссылку на файл JavaScript на страницу сопоставления и затем добавить вызов, который выполняет визуализацию `<script>` тегов на странице. Затем на странице сопоставление вызовите модуль карты, которую вы хотите использовать.

Приведенный ниже показано, как создать страницу, которая подготавливает к просмотру схему, на основе адреса и другую страницу, которая подготавливает к просмотру схему, на основе координат широты и долготы. Пример сопоставления адресов использует Google карты, а в примере сопоставления координат Bing Maps. Обратите внимание, следующие элементы в коде:

- Вызов `Assets.AddScript` в верхней части две страницы сопоставления. Этот метод добавляет ссылку на *jquery-1.6.2.min.js* файл, который входит в состав **начального сайта** шаблона и который необходим `Maps` класса.
- Вызов `Assets.GetScripts` метод в файле макета. Этот метод отображает `<script>` тег на двух страницах сопоставления.
- Вызов `@Maps.GetGoogleHtml` и `@Maps.GetBingHtml` методы на страницах сопоставления. Для сопоставления адреса, необходимо передать строку адреса. Чтобы сопоставить координаты, необходимо передать широту и долготу координат. Для обработчика Bing Maps, необходимо также передать ключ (который бесплатно получить необходимо зарегистрироваться на [узел разработчиков Bing Maps](https://www.microsoft.com/maps/developers/web.aspx)). Методы для других модулей карты работать так же, как (`@Maps.GetYahooHtml`, `@Maps.GetMapQuestHtml`).

Чтобы создать сопоставления страниц:

1. Создание веб-сайта, на основе **начального сайта** шаблона.
2. Создайте файл с именем *MapAddress.cshtml* в корень сайта. Эта страница будет создать карту, на основе адреса, который передается в него.
3. Скопируйте следующий код в файл, перезаписав существующее содержимое. 

    [!code-cshtml[Main](top-features-in-web-pages-2/samples/sample19.cshtml)]
4. Создайте файл с именем  *\_MapLayout.cshtml* в корень сайта. Эта страница будет страницы макета для двух страницах сопоставления.
5. Скопируйте следующий код в файл, перезаписав существующее содержимое. 

    [!code-html[Main](top-features-in-web-pages-2/samples/sample20.html)]
6. Создайте файл с именем *MapCoordinates.cshtml* в корень сайта. Эта страница будет создать карту, на основе набора координат, которые вы ему передаете.
7. Скопируйте следующий код в файл, перезаписав существующее содержимое. 

    [!code-cshtml[Main](top-features-in-web-pages-2/samples/sample21.cshtml)]

Чтобы проверить сопоставления страниц:

1. Откройте страницу *MapAddress.cshtml* файла.
2. Введите полный адрес строки, включая почтовый адрес, состояние или область и почтовый индекс, а затем выберите **Map It** кнопки. Страница отображает карты из Google Maps: 

    [![topseven-maphelper-1](top-features-in-web-pages-2/_static/image38.png)](top-features-in-web-pages-2/_static/image37.png)
3. Найти набор координат широты и долготы в определенном расположении.
4. Откройте страницу *MapCoordinates.cshtml*. Введите координаты, а затем выберите **Map It** кнопки. Страница отображает карты из службы Bing Maps: 

    [![topseven-maphelper-2](top-features-in-web-pages-2/_static/image40.png)](top-features-in-web-pages-2/_static/image39.png)

<a id="sidebyside"></a>
### <a name="running-web-pages-applications-side-by-side"></a>Запуск приложений на веб-страницах рядом

Web Pages 2 добавляет возможность запускать приложения рядом друг с другом. Это позволяет продолжать выполнять приложения Web Pages 1, создавать новые приложения Web Pages 2 и запустить все из них на одном компьютере.

Ниже приведены некоторые рекомендации по установке бета-версия 2 веб-страниц с помощью WebMatrix.

- По умолчанию существующие веб-страницы приложения будут работать как приложения версии 2 на компьютере. (Сборки для версии 2, устанавливаются в глобальном кэше СБОРОК и будет использоваться автоматически.)
- Если вы хотите запустить сайт с помощью веб-страниц (вместо используемого по умолчанию, как показано выше), можно настроить для этого сайта. Если узел уже не содержит *web.config* файл в корневом каталоге сайта, создайте его и скопируйте следующий код XML, перезаписав существующее содержимое. Если сайт уже содержит *web.config* добавьте `<appSettings>` элемент, аналогичный приведенному ниже, чтобы `<configuration>` раздел.

    [!code-xml[Main](top-features-in-web-pages-2/samples/sample22.xml)]
  "— Если не указать версию в *web.config* файл, сайт развертывается как сайт версии 2. (Версия 2 сборки копируются в *bin* папку развернутого веб-сайта.)
- Новые приложения, созданный с помощью шаблонов узлов в Web Matrix версии 2 Beta включают сборки версии 2 веб-страниц на сайте *bin* папки.

Как правило, всегда можно управлять какую версию веб-страниц для использования с веб-узла с помощью NuGet для установки на соответствующие сборки на веб-узел *bin* папки. Чтобы найти пакеты, посетите [NuGet.org](http://NuGet.org).

<a id="mobile"></a>
### <a name="rendering-pages-for-mobile-devices"></a>Подготовка к просмотру страниц для мобильных устройств

Web Pages 2 позволяет создавать пользовательские отображение для отображения содержимого на мобильный или других устройств.

`System.Web.WebPages` Пространство имен содержит следующие классы, которые позволяют работать с режимов отображения: `DefaultDisplayMode`, `DisplayInfo`, и `DisplayModes`. Можно напрямую использовать эти классы и написать код, который выполняет визуализацию выходных для конкретных устройств.

Кроме того, можно создать страницы для конкретных устройств с помощью шаблона именования файлов следующим образом: <em>FileName.</em> <em>Mobile</em><em>.cshtml</em>. Например, можно создать две версии страницы, один с именем <em>MyFile.cshtml</em> и один с именем <em>MyFile.Mobile.cshtml</em>. Во время выполнения, когда мобильное устройство запрашивает <em>MyFile.cshtml</em>, веб-страниц отображает содержимое из <em>MyFile.Mobile.cshtml</em>. В противном случае <em>MyFile.cshtml</em> визуализации.

Приведенный ниже показано, как включить отрисовку мобильных устройств, добавив страницу содержимого для мобильных устройств. *Page1.cshtml* содержит содержимое, а также боковая панель навигации. *Page1.Mobile.cshtml* с тем же содержимым, но пропускает боковой панели.

Построение и выполнение примера кода:

1. В веб-страницах сайта, создайте файл с именем *Page1.cshtml* и скопируйте *Page1.cshtml* содержимого в него из примера.
2. Создайте файл с именем *Page1.Mobile.cshtml* и скопируйте *Page1.Mobile.cshtml* содержимого в него из примера. Обратите внимание на то, что мобильную версию страницы пропускает раздел перехода для повышения подготовки к просмотру на экране меньшего размера.
3. Запустите классический браузер и перейдите к *Page1.cshtml*.
4. Запустите браузер мобильного устройства (или эмулятор мобильных устройств) и перейдите к *Page1.cshtml*. Обратите внимание, что в мобильную версию страницы, отображающий данный момент веб-страниц. 

    > [!NOTE]
    > Чтобы протестировать страницах для мобильных устройств, можно использовать имитатор мобильных устройств, который выполняется на настольном компьютере. Эта программа предназначена для тестирования веб-страниц, так как они выглядели на мобильных устройствах (то есть обычно намного меньше с область отображается). Одним из примеров симулятор является [надстройки переключателя между агентом пользователя](http://addons.mozilla.org/en-us/firefox/addon/user-agent-switcher/) для Mozilla Firefox, которая позволяет моделировать различные браузеры для мобильных устройств из версии Firefox для настольного компьютера.

*Page1.cshtml*

[!code-html[Main](top-features-in-web-pages-2/samples/sample23.html)]

*Page1.Mobile.cshtml*

[!code-html[Main](top-features-in-web-pages-2/samples/sample24.html)]

*Page1.cshtml* подготавливается к просмотру в классическом браузере:

[![topseven-displaymodes-1](top-features-in-web-pages-2/_static/image42.png)](top-features-in-web-pages-2/_static/image41.png)

*Page1.Mobile.cshtml* отображаются в представлении симулятор Apple iPhone в браузере Firefox. Несмотря на то, что этот запрос поступает в *Page1.cshtml*, отрисовке приложения *Page1.Mobile.cshtml*.

[![topseven-displaymodes-2](top-features-in-web-pages-2/_static/image44.png)](top-features-in-web-pages-2/_static/image43.png)

<a id="resources"></a>
## <a name="additional-resources"></a>Дополнительные ресурсы

### <a name="aspnet-web-pages-1-resources"></a>ASP.NET Web Pages 1 ресурсы

> [!NOTE]
> Большинство программирования Web Pages 1 и ресурсы API по-прежнему применяются к Web Pages 2.

- [Введение в программирование веб-страниц ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202890)

### <a name="webmatrix-resources"></a>WebMatrix ресурсы

- [WebMatrix 2 новые возможности](http://webmatrix.com/next)
- [Сайт Microsoft WebMatrix](https://go.microsoft.com/fwlink/?LinkID=195076)
- [Запуск веб-разработки с помощью Microsoft WebMatrix](https://msdn.microsoft.com/en-us/library/hh145669(v=VS.99).aspx)(включает полноразмерных пример приложения веб-страниц)
