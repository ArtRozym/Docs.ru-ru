---
uid: mvc/overview/getting-started/database-first-development/changing-the-database
title: 'EF Database First с ASP.NET MVC: изменение базы данных | Документация Майкрософт'
author: tfitzmac
description: С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложение, которое предоставляет интерфейс для существующей базы данных. Этот учебник seri...
ms.author: riande
ms.date: 10/01/2014
ms.assetid: cfd5c083-a319-482e-8f25-5b38caa93954
msc.legacyurl: /mvc/overview/getting-started/database-first-development/changing-the-database
msc.type: authoredcontent
ms.openlocfilehash: 4ee73dc066a56944dd2e5600460628656ae87e37
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/16/2018
ms.locfileid: "41836314"
---
<a name="ef-database-first-with-aspnet-mvc-changing-the-database"></a>EF Database First с ASP.NET MVC: изменение базы данных
====================
по [Tom FitzMacken](https://github.com/tfitzmac)

> С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложение, которое предоставляет интерфейс для существующей базы данных. В этой серии руководств показано, как автоматически создавать код, позволяющий пользователям для отображения, изменения и создавать и удалять данные, находящиеся в таблице базы данных. Созданный код соответствует столбцам в таблице базы данных.
> 
> Части этой серии посвящена выполнении обновления структуры базы данных и распространение этого изменения на протяжении всего веб-приложения.


## <a name="add-a-column"></a>Добавление столбца

Если обновить структуру таблицы в базе данных, необходимо убедиться, что изменение распространяется на модели данных, представления и контроллера.

В этом учебнике вы добавите нового столбца на таблицу "Student" для записи отчество учащегося. Чтобы добавить этот столбец, откройте проект базы данных и откройте файл Student.sql. Через конструктор или кода T-SQL, добавьте столбец с именем **MiddleName** , NVARCHAR(50) и допускает значения NULL.

![Добавление отчество](changing-the-database/_static/image1.png)

Разверните это изменение в локальную базу данных, запустив проект базы данных (или F5). Новое поле добавляется в таблицу. Если вы не видите его в обозревателе объектов SQL Server, нажмите кнопку "Обновить" в области.

![Показать новый столбец](changing-the-database/_static/image2.png)

Новый столбец существует в таблице базы данных, но он не существует в классе модели данных. Необходимо обновить модель, чтобы включить новый столбец. В **моделей** откройте **ContosoModel.edmx** файл для отображения на схеме модели. Обратите внимание на то, что модель Student не содержит свойство MiddleName. Щелкните правой кнопкой мыши в области конструктора и выберите **обновить модель из базы данных**.

![обновление модели](changing-the-database/_static/image3.png)

В мастере обновлений, выберите **обновить** вкладку и **учащихся** таблицы.

![Мастер обновления](changing-the-database/_static/image4.png)

Нажмите кнопку **Готово**.

После завершения процесса обновления схемы базы данных включает в себя новый **MiddleName** свойство. Сохранить **ContosoModel.edmx** файла. Сохраните этот файл для нового свойства передаются на **Student.cs** класса. Теперь обновления базы данных и модели.

Постройте решение.

К сожалению, представления по-прежнему не содержат новое свойство. Для обновления представления можно двумя способами - можно повторно создать представления, снова добавив формирования шаблонов для класса Student, или можно вручную добавить новое свойство в существующие представления. В этом руководстве вы добавите формирование шаблонов еще раз, так как не были внесены настраиваемые изменения в представления, автоматически создается. Можно вручную добавить свойство, когда были внесены изменения в представления и не хотите потерять внесенные изменения.

Чтобы обеспечить представления создаются повторно, удалите **учащихся** папке **представления**и удалить **StudentsController**. Щелкните, правой кнопкой мыши **контроллеров** папки и добавление формирования шаблонов для **учащихся** модели. Опять же, назовите контроллер **StudentsController**. Нажмите кнопку **ОК**.

Представлений теперь содержит указанное свойство MiddleName.

![Показать отчество](changing-the-database/_static/image5.png)

В следующем разделе будет добавлен код для настройки представления для отображения сведений о записи учащегося.

> [!div class="step-by-step"]
> [Назад](generating-views.md)
> [Вперед](customizing-a-view.md)
