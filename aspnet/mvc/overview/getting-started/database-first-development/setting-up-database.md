---
uid: mvc/overview/getting-started/database-first-development/setting-up-database
title: Начало работы с Entity Framework 6 Database First с помощью MVC 5 | Документация Майкрософт
author: tfitzmac
description: С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложение, которое предоставляет интерфейс для существующей базы данных. Этот учебник seri...
ms.author: riande
ms.date: 10/01/2014
ms.assetid: 095abad4-3bfe-4f06-b092-ae6a735b7e49
msc.legacyurl: /mvc/overview/getting-started/database-first-development/setting-up-database
msc.type: authoredcontent
ms.openlocfilehash: 44725b772922426b08c72de83d384c1e03e319cb
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/16/2018
ms.locfileid: "41839053"
---
<a name="getting-started-with-entity-framework-6-database-first-using-mvc-5"></a>Начало работы с Entity Framework 6 Database First с помощью MVC 5
====================
по [Tom FitzMacken](https://github.com/tfitzmac)

> С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложение, которое предоставляет интерфейс для существующей базы данных. В этой серии руководств показано, как автоматически создавать код, позволяющий пользователям для отображения, изменения и создавать и удалять данные, находящиеся в таблице базы данных. Созданный код соответствует столбцам в таблице базы данных. В последней части серии вы развернете сайта и базы данных в Azure.
> 
> Части этой серии рассматривается создание базы данных и заполнение его данными.
> 
> В этой серии было написано с материалами из том Дайкстра и Рик Андерсон. Она была улучшена зависимости на отзывы от пользователей в разделе "Примечания".


## <a name="introduction"></a>Вступление

В этом разделе показано, как начать с существующей базы данных и быстро создавать веб-приложения, который позволяет пользователям взаимодействовать с данными. Создание веб-приложения использует Entity Framework 6 и MVC 5. Компонент формирования шаблонов ASP.NET позволяет автоматически создавать код для отображения, обновления, создания и удаления данных. С помощью средства публикации в Visual Studio, вы можете легко развернуть сайта и базы данных в Azure.

В этом разделе рассматриваются ситуации, в котором базы данных и хотите создать код для веб-приложения на основе полей этой базы данных. Такой подход называется Database First разработки. Если у вас еще нет существующей базы данных, вместо этого можно использовать такой подход называют разработки Code First, которая включает в себя определение классов данных и создании базы данных из свойства класса.

Вводный пример шаблона разработки Code First, см. в разделе [Приступая к работе с ASP.NET MVC 5](../introduction/getting-started.md). Более сложный пример, см. в разделе [Создание модели данных Entity Framework для приложения ASP.NET MVC 4](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).

Рекомендации по выбору подхода Entity Framework, см. в разделе [принципы разработки с использованием Entity Framework](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).

## <a name="prerequisites"></a>Предварительные требования

Visual Studio 2013 или Visual Studio Express 2013 для Web

## <a name="set-up-the-database"></a>Настройка базы данных

Чтобы имитировать среду размещения существующей базы данных, сначала создать базу данных с предварительно заполняется данными и затем создать веб-приложения, которое подключается к базе данных.

Этот учебник был разработан использование LocalDB с Visual Studio 2013 или Visual Studio Express 2013 для Web. Вместо LocalDB можно использовать существующий сервер базы данных, но в зависимости от установленной версии Visual Studio и тип базы данных, все средства анализа данных в Visual Studio может не поддерживаться. Если средства недоступны для базы данных, может потребоваться выполнить некоторые шаги конкретной базы данных в пакет управления для базы данных.

Если у вас есть проблема с инструменты для баз данных в вашей версии Visual Studio, убедитесь, что вы установили последнюю версию инструменты для баз данных. Сведения об обновлении или установке инструменты для баз данных, см. в разделе [Microsoft SQL Server Data Tools](https://msdn.microsoft.com/data/hh297027).

Запустите Visual Studio и создайте **проект базы данных SQL Server**. Назовите проект **ContosoUniversityData**.

![Создать проект базы данных](setting-up-database/_static/image1.png)

Теперь у вас есть пустая база данных. Вы развернете этой базы данных в Azure далее в этом руководстве, необходимо задать базу данных SQL Azure в качестве целевой платформы для проекта. Задание целевой платформы не развертывает фактически базы данных; Это только означает, что проект базы данных будет убедитесь, что структуры базы данных совместим с целевой платформой. Чтобы задать целевую платформу, откройте **свойства** для проекта и выберите **базы данных SQL Microsoft Azure** для целевой платформы.

![набор целевой платформы](setting-up-database/_static/image2.png)

Можно создавать таблицы, необходимых для этого руководства путем добавления скриптов SQL, которые определяют таблицы. Щелкните правой кнопкой мыши проект и добавить новый элемент.

![Добавление нового элемента](setting-up-database/_static/image3.png)

Добавьте новую таблицу с именем Student.

![Добавьте таблицу student](setting-up-database/_static/image4.png)

В файле таблицы замените следующий код, чтобы создать таблицу команду T-SQL.

[!code-sql[Main](setting-up-database/samples/sample1.sql)]

Обратите внимание, что окне конструктора автоматически синхронизирует с кодом. Вы можете работать с код или конструктор.

![Показать код и Дизайн](setting-up-database/_static/image5.png)

Добавьте другой таблицы. Время, назовите его курс и используйте следующую команду T-SQL.

[!code-sql[Main](setting-up-database/samples/sample2.sql)]

И повторить еще раз, чтобы создать таблицу с именем регистрации.

[!code-sql[Main](setting-up-database/samples/sample3.sql)]

Можно заполнить базу данных данными через сценарий, выполняемый после развертывания базы данных. Добавьте сценарий после развертывания проекта. Можно использовать имя по умолчанию.

![Добавить скрипт после развертывания](setting-up-database/_static/image6.png)

Добавьте следующий код T-SQL в скрипт после развертывания. Этот скрипт просто добавляет данные в базу данных при обнаружении нет соответствующей записи. Он не перезаписать или удалить все данные, введенные в базу данных.

[!code-sql[Main](setting-up-database/samples/sample4.sql)]

Важно отметить, что сценарий после развертывания выполняется каждый раз при развертывании проекта базы данных. Таким образом необходимо тщательно проанализировать требования к при записи этого скрипта. В некоторых случаях вы можете начинать с набором известных данных, каждый раз при развертывании проекта. В других случаях можно не изменять существующие данные любым способом. На основе требований, можно решить, необходим ли сценарий после развертывания или что необходимо для включения в скрипт. Дополнительные сведения о заполнении базы данных с помощью скрипта после развертывания см. в разделе [данных, включая, в проект базы данных SQL Server](https://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx).

Теперь у вас есть 4 файлов скриптов SQL, но не фактический таблицы. Все готово для развертывания проекта базы данных localdb. В Visual Studio щелкните кнопку "Пуск" (или F5) для создания и развертывания проекта базы данных. Проверьте, вкладка «Вывод», чтобы убедиться в успешном построения и развертывания.

![Показать выходные данные](setting-up-database/_static/image7.png)

Для просмотра, создания новой базы данных, откройте **обозреватель объектов SQL Server** и найдите имя проекта в нужной базе данных локального сервера (в данном случае **\ProjectsV12 (localdb)**).

![Показать новой базы данных](setting-up-database/_static/image8.png)

Чтобы увидеть, что таблицы заполняются данными, щелкните правой кнопкой мыши таблицу и выберите **данные представления**.

![Показать таблицу данных](setting-up-database/_static/image9.png)

Редактируемое представление таблицы отображается.

![Показать результаты для таблицы данных](setting-up-database/_static/image10.png)

Теперь базы данных настраивается и заполняется данными. В следующем руководстве вы создадите веб-приложения для базы данных.

> [!div class="step-by-step"]
> [Вперед](creating-the-web-application.md)
